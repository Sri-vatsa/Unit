(function(b){function a(d,c){this.KNOB_WIDTH=32;this.KNOB_MARGIN=28;this.LEVEL_MARGIN=this.KNOB_MARGIN+10;this.LABEL_WIDTH=44;this.LEVEL_WIDTH=22;this.bearer=d;this.options=c;this.currentLevel=0;this.value=null}a.prototype={activate:function(){this.numOptions=this.bearer.find("input[type=radio]").length;this.reset();this.fitContainer();this.addBaseStyle();this.addLevels();this.addBar();this.setSlider();this.addInteraction();this.setDisabled();var c=this;b(window).on("resize orientationChanged",function(){c.reset();c.fitContainer();c.addBaseStyle();c.addLevels();c.setSlider();c.addInteraction();c.setDisabled()})},reset:function(){var c=this.bearer.find("label"),d=this.bearer.find(".slider-level");c.each(function(){var e=b(this);e.removeClass("slider-label");e.css("left",0)});d.each(function(){b(this).remove()});this.bearer.css("width","auto")},fitContainer:function(){if(this.options.fitContainer){this.KNOB_MARGIN=(this.bearer.width()-this.KNOB_WIDTH)/(this.numOptions-1)-this.KNOB_WIDTH;this.LEVEL_MARGIN=this.KNOB_MARGIN+10}},addBaseStyle:function(){var c=0,e=this,d=(this.numOptions*this.LEVEL_WIDTH)+(this.numOptions-1)*this.LEVEL_MARGIN;this.bearer.find("input[type=radio]").hide();this.bearer.addClass("radios-to-slider "+this.options.size);this.bearer.css("width",d+"px");this.bearer.find("label").each(function(){var g=b(this),f=e.KNOB_WIDTH/2-(e.LABEL_WIDTH/2)+c*e.LEVEL_MARGIN+c*e.LEVEL_WIDTH;g.addClass("slider-label");g.css("left",f+"px");c++})},addLevels:function(){var d=this.bearer,e=0,c=this;d.find("input[type=radio]").each(function(){var f=b(this);d.append("<ins class='slider-level' data-radio='"+f.attr("id")+"' data-value="+f.val()+"></ins>")});d.find(".slider-level").each(function(){var h=b(this),f=d.css("padding-left").replace("px","")-0,g=f+(e*c.LEVEL_MARGIN)+(e*c.LEVEL_WIDTH);h.css("left",g+"px");e++})},addBar:function(){this.bearer.append("<ins class='slider-bar'><span class='slider-knob'></span></ins>")},setSlider:function(){var f=this.bearer.find("input[type=radio]"),h=this.bearer.find(".slider-level"),c=this.bearer.find(".slider-label"),e=1,g=this,d;f.each(function(){var l=b(this),k=g.bearer.find(".slider-bar"),i=l.attr("id");if(l.prop("checked")){var j=(e*g.KNOB_WIDTH)+(e-1)*g.KNOB_MARGIN;k.css("display","block");k.width(j+"px");g.currentLevel=e}if(g.options.animation){k.addClass("transition-enabled")}e++});d=0;h.each(function(){d++;var i=b(this);if(d<g.currentLevel){i.show();i.addClass("slider-lower-level")}else{if(d==g.currentLevel){i.hide()}else{i.show();i.removeClass("slider-lower-level")}}});d=0;c.each(function(){d++;var i=b(this);if(d==g.currentLevel){i.addClass("slider-label-active")}else{i.removeClass("slider-label-active")}})},addInteraction:function(){var d=this,e=d.bearer,f=e.find(".slider-level:not(.disabled)"),c=e.find("input[type=radio]:not(:disabled)");f.on("click",function(){var i=b(this),j=i.attr("data-value"),h=i.attr("data-radio"),g=e.find("#"+h);g.prop("checked",true);if(d.options.onSelect){d.options.onSelect(g,[f,c])}d.value=j;e.attr("data-value",j);d.setSlider();e.trigger("radiochange")});c.on("change",function(){var i=b(this),j=i.attr("data-value"),h=i.attr("data-radio"),g=e.find("#"+h);g.prop("checked",true);if(d.options.onChange){d.options.onChange(g,[f,c])}d.value=j;e.attr("data-value",j);d.setSlider();e.trigger("radiochange")})},setDisabled:function(d,c){if(!this.options.isDisable){return}this.setDisable()},setDisable:function(c){this.options.isDisable=true;var e=this,f=e.bearer,g=this.bearer.find(".slider-level"),d=this.bearer.find("input[type=radio]");b.merge(g,d).each(function(){var h=b(this);h.prop("disabled",true).addClass("disabled");h.off("click change")});if(typeof c==="function"){c(g,d)}f.trigger("radiodisabled")},setEnable:function(c){this.options.isDisable=false;var e=this,f=e.bearer,g=this.bearer.find(".slider-level"),d=this.bearer.find("input[type=radio]");b.merge(g,d).each(function(){b(this).prop("disabled",false).removeClass("disabled");e.addInteraction()});if(typeof c==="function"){c(g,d)}f.trigger("radiodenabled")},getValue:function(){return this.value}};b.fn.radiosToSlider=function(c){var d=[],e=this;e.each(function(){c=b.extend({},b.fn.radiosToSlider.defaults,c);var f=new a(b(this),c);f.activate();d.push({bearer:f.bearer,setDisable:f.setDisable.bind(f),setEnable:f.setEnable.bind(f),getValue:f.getValue.bind(f)})});return d};b.fn.radiosToSlider.defaults={size:"medium",animation:true,fitContainer:true,isDisable:false,onSelect:null}})(jQuery);
